<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Xiaoyang Li &amp; Jingyu Fu" />


<title>Regression</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown-header">Description of data</li>
<li>
  <a href="Geographica.html">Geographica</a>
</li>
<li>
  <a href="https://lsyjessica.shinyapps.io/shiny_dashboard_template/">Age Group</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Time Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://lsyjessica.shinyapps.io/time_shiny/">Country vs Time</a>
    </li>
    <li>
      <a href="time.html">Comparison</a>
    </li>
  </ul>
</li>
<li>
  <a href="regression.html">Regression</a>
</li>
<li>
  <a href="https://github.com/qi-yuchen/P8105_final_project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Regression</h1>
<h4 class="author">Xiaoyang Li &amp; Jingyu Fu</h4>

</div>


<div id="finding-the-passcode-of-happiness" class="section level2">
<h2>Finding the passcode of Happiness</h2>
<p><img src="image/regression3.jpg" style="width:75%"></p>
<p>One of the key motivation of finding the secrets of Happiness is to find its passcode to it. With this passcode, we can unlock a lot of door in the world of hapiness. We can see what are the factors that constructed our satisfaction about life; how can we boost our hapiness; we can even predict our future hapiness with this passcode.</p>
</div>
<div id="how-we-locate-the-potential-numbers-that-construct-the-passcode" class="section level2">
<h2>How we locate the potential numbers that construct the passcode?</h2>
<p>The debate of whether higher gdp can increase hapiness is never endless. Some say it does, thus we should work hardly on raising gdp. Some say it actually has a quite opposite influence on our hapiness. Which opinion is true according to our data? We choose gdp as one of the potential key variables to find the association.</p>
<p>Also, humans are an extremely prosocial species. Compared to most primates, humans provide more assistance to family, friends, and strangers, even when costly. Some evidence indicate that there is well-being benefits from donating money.</p>
<p>Moreover, according to our previous exploration, we can tell that there is an obvious association between age and happiness.</p>
<p>Both related to money, what’s the association between these two variable and happiness? To answer this question, we use the following three variables to find the best linear model that describes the association.</p>
<p><code>happiness</code> represent the happiness score or subjective well-being which was measured by the Gallup World Poll(GWP) covering years from 2005 to 2018,</p>
<p><code>gdp</code> represent the log transformation of statistics of GDP per capita in purchasing power parity(PPP) at constant 2011 international dollar prices are from the November 14,2018 update of the World Development Indicators (WDI).</p>
<p><code>generosity</code> is the residual of regressing national average of response to the GWPquestion “Have you donated money to a charity in the past month?” on GDP per capita.</p>
</div>
<div id="which-model-is-the-closest-to-the-true-passcode" class="section level2">
<h2>Which model is the closest to the ‘true passcode’?</h2>
<div id="we-built-10-potentilas-models" class="section level3">
<h3>We built 10 potentilas models</h3>
<p>Model 1 to 3 use each of the three variables as the only variable.</p>
<p>lm1:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp}\]</span></p>
<p>lm2:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{generosity}\]</span></p>
<p>lm3:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{age}\]</span></p>
<p>Model 4 to 7 use two or three of the three variables as combination(confounder).</p>
<p>lm4:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp} + \beta_2X_{generosity}\]</span></p>
<p>lm5:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp}  + \beta_3X_{age} \]</span></p>
<p>lm6:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{age} + \beta_2X_{generosity} \]</span></p>
<p>lm7:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp} + \beta_2X_{generosity} + \beta_3X_{age} \]</span></p>
<p>Model 8 to 10 use interaction of those variables.</p>
<p>lm8:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp} * \beta_2X_{generosity}\]</span></p>
<p>lm9:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp} * \beta_3X_{age} \]</span></p>
<p>lm10:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{age} * \beta_2X_{generosity} \]</span></p>
</div>
<div id="now-lets-find-out-the-best-model" class="section level3">
<h3>Now let’s find out the best model!</h3>
<p>We will use several criterias to find our best model.</p>
<p>The first criteria we use is adjusted r square, which tells us the goodness of fit of a model. Higher the value, better the goodness of fit. Model 7 has the highest value, following are model 8 and 5.</p>
<p>The second set of criterias we use are AIC and BIC, which tell us the quality of our model. Lower the value, higher the quality. Model 7 has the lowest AIC and BIC value, following are Model 8 and Model 4.</p>
<table>
<thead>
<tr class="header">
<th align="left">model_name</th>
<th align="right">r.squared</th>
<th align="right">adj.r.squared</th>
<th align="right">sigma</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">df</th>
<th align="right">logLik</th>
<th align="right">AIC</th>
<th align="right">BIC</th>
<th align="right">deviance</th>
<th align="right">df.residual</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">lm1</td>
<td align="right">0.5797524</td>
<td align="right">0.5796624</td>
<td align="right">0.7678225</td>
<td align="right">6435.59979</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">-5388.180</td>
<td align="right">10782.360</td>
<td align="right">10801.70</td>
<td align="right">2750.257</td>
<td align="right">4665</td>
</tr>
<tr class="even">
<td align="left">lm2</td>
<td align="right">0.0304221</td>
<td align="right">0.0302106</td>
<td align="right">1.1682986</td>
<td align="right">143.83058</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">-7219.597</td>
<td align="right">14445.195</td>
<td align="right">14464.49</td>
<td align="right">6256.801</td>
<td align="right">4584</td>
</tr>
<tr class="odd">
<td align="left">lm3</td>
<td align="right">0.0303123</td>
<td align="right">0.0299012</td>
<td align="right">1.1683498</td>
<td align="right">73.74202</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">-7431.860</td>
<td align="right">14871.720</td>
<td align="right">14897.56</td>
<td align="right">6440.265</td>
<td align="right">4718</td>
</tr>
<tr class="even">
<td align="left">lm4</td>
<td align="right">0.6137137</td>
<td align="right">0.6135452</td>
<td align="right">0.7375042</td>
<td align="right">3640.62922</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">-5109.391</td>
<td align="right">10226.781</td>
<td align="right">10252.50</td>
<td align="right">2492.751</td>
<td align="right">4583</td>
</tr>
<tr class="odd">
<td align="left">lm5</td>
<td align="right">0.6172381</td>
<td align="right">0.6169919</td>
<td align="right">0.7329354</td>
<td align="right">2506.50308</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">-5170.159</td>
<td align="right">10350.317</td>
<td align="right">10382.56</td>
<td align="right">2504.937</td>
<td align="right">4663</td>
</tr>
<tr class="even">
<td align="left">lm6</td>
<td align="right">0.0615510</td>
<td align="right">0.0609365</td>
<td align="right">1.1496420</td>
<td align="right">100.17470</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">-7144.772</td>
<td align="right">14299.543</td>
<td align="right">14331.70</td>
<td align="right">6055.923</td>
<td align="right">4582</td>
</tr>
<tr class="odd">
<td align="left">lm7</td>
<td align="right">0.6521689</td>
<td align="right">0.6518652</td>
<td align="right">0.6999853</td>
<td align="right">2147.29618</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">-4868.943</td>
<td align="right">9749.886</td>
<td align="right">9788.47</td>
<td align="right">2244.595</td>
<td align="right">4581</td>
</tr>
<tr class="even">
<td align="left">lm8</td>
<td align="right">0.6230552</td>
<td align="right">0.6228084</td>
<td align="right">0.7286117</td>
<td align="right">2524.54204</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">-5053.258</td>
<td align="right">10116.516</td>
<td align="right">10148.67</td>
<td align="right">2432.469</td>
<td align="right">4582</td>
</tr>
<tr class="odd">
<td align="left">lm9</td>
<td align="right">0.6172756</td>
<td align="right">0.6168650</td>
<td align="right">0.7330567</td>
<td align="right">1503.49499</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">-5169.931</td>
<td align="right">10353.861</td>
<td align="right">10399.00</td>
<td align="right">2504.692</td>
<td align="right">4661</td>
</tr>
<tr class="even">
<td align="left">lm10</td>
<td align="right">0.0687907</td>
<td align="right">0.0677741</td>
<td align="right">1.1454489</td>
<td align="right">67.66717</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">-7127.014</td>
<td align="right">14268.027</td>
<td align="right">14313.04</td>
<td align="right">6009.204</td>
<td align="right">4580</td>
</tr>
</tbody>
</table>
</div>
<div id="obtaining-our-best-model." class="section level3">
<h3>Obtaining our best model.</h3>
<p>Obviously, Model 7 wins in all the criterias.</p>
<p>Therefore, I would like to choose the lm7, i.e. <span class="math display">\[Y_{happiness} = -1.39 + 0.77X_{gdp} + 1.36 X_{generosity} + (-0.36)I(age=30-49) + (-0.57)I(age = 50 +)\]</span></p>
<p>Summary results of lm7 are shown below:</p>
<pre><code>## 
## Call:
## lm(formula = ladder ~ gdp + generosity + age, data = df)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.58854 -0.46163  0.01775  0.49240  2.12936 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -1.406986   0.082464  -17.06   &lt;2e-16 ***
## gdp          0.776230   0.008801   88.20   &lt;2e-16 ***
## generosity   1.358307   0.063953   21.24   &lt;2e-16 ***
## age30-49    -0.357256   0.025237  -14.16   &lt;2e-16 ***
## age50+      -0.566644   0.025475  -22.24   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.7 on 4581 degrees of freedom
##   (135 observations deleted due to missingness)
## Multiple R-squared:  0.6522, Adjusted R-squared:  0.6519 
## F-statistic:  2147 on 4 and 4581 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div id="hooray-now-we-have-obtained-the-passcode-of-happiness" class="section level2">
<h2>Hooray! Now we have obtained the passcode of Happiness!</h2>
<p>Before we continue, there’s couple of more things we want to check with our passcode.</p>
<div id="does-it-work-well" class="section level3">
<h3>Does it work well?</h3>
<p>According to the plot above, RMSE of lm7 is the lowest, which show that lm7 work best among all our linear model to fit test data!</p>
<p><img src="regression_files/figure-html/unnamed-chunk-3-1.png" width="90%" /></p>
</div>
<div id="does-it-fulfill-our-assuamption" class="section level3">
<h3>Does it fulfill our assuamption?</h3>
<p>We made some assumptions regarding residuals like normality distribution and constant variance of residuals. According to the diagnostic above, residuals vs fitted and scale-location indicate the constant variance of residuals is satisfied. QQ plot demonstrate residuals follow normal distribution. And the residuals vs leveragge prove there are no obvious influencial observation in out dataset.</p>
<p><img src="regression_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
<p>So glad to see that our model got such a high score in those questions, now let’d officially meet our best model!</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
