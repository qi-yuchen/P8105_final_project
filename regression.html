<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Xiaoyang Li &amp; Jingyu Fu" />


<title>regression</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown-header">Description of data</li>
<li>
  <a href="Geographica.html">Geographica</a>
</li>
<li class="dropdown-header">Age Group</li>
<li class="dropdown-header">Time Analysis</li>
<li class="dropdown-header">Regression</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">regression</h1>
<h4 class="author">Xiaoyang Li &amp; Jingyu Fu</h4>
<h4 class="date">2019/12/1</h4>

</div>


<div id="data-cleaning" class="section level2">
<h2>Data cleaning</h2>
<p>Add countrycode</p>
<pre><code>## Joining, by = c(&quot;country_name&quot;, &quot;year&quot;, &quot;life_ladder&quot;)</code></pre>
</div>
<div id="building-model" class="section level2">
<h2>Building model</h2>
<table>
<thead>
<tr class="header">
<th align="left">model_name</th>
<th align="right">r.squared</th>
<th align="right">adj.r.squared</th>
<th align="right">sigma</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">df</th>
<th align="right">logLik</th>
<th align="right">AIC</th>
<th align="right">BIC</th>
<th align="right">deviance</th>
<th align="right">df.residual</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">lm1</td>
<td align="right">0.5739112</td>
<td align="right">0.5738191</td>
<td align="right">0.7695231</td>
<td align="right">6230.89229</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">-5353.384</td>
<td align="right">10712.768</td>
<td align="right">10732.088</td>
<td align="right">2739.359</td>
<td align="right">4626</td>
</tr>
<tr class="even">
<td align="left">lm2</td>
<td align="right">0.0264928</td>
<td align="right">0.0262788</td>
<td align="right">1.1655225</td>
<td align="right">123.76836</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">-7152.091</td>
<td align="right">14310.182</td>
<td align="right">14329.451</td>
<td align="right">6178.197</td>
<td align="right">4548</td>
</tr>
<tr class="odd">
<td align="left">lm3</td>
<td align="right">0.0311031</td>
<td align="right">0.0306890</td>
<td align="right">1.1624320</td>
<td align="right">75.10165</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">-7346.678</td>
<td align="right">14701.356</td>
<td align="right">14727.162</td>
<td align="right">6322.490</td>
<td align="right">4679</td>
</tr>
<tr class="even">
<td align="left">lm4</td>
<td align="right">0.6078094</td>
<td align="right">0.6076369</td>
<td align="right">0.7398564</td>
<td align="right">3523.42638</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">-5083.758</td>
<td align="right">10175.517</td>
<td align="right">10201.208</td>
<td align="right">2488.971</td>
<td align="right">4547</td>
</tr>
<tr class="odd">
<td align="left">lm5</td>
<td align="right">0.6123450</td>
<td align="right">0.6120935</td>
<td align="right">0.7341558</td>
<td align="right">2434.71098</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">-5134.637</td>
<td align="right">10279.274</td>
<td align="right">10311.473</td>
<td align="right">2492.265</td>
<td align="right">4624</td>
</tr>
<tr class="even">
<td align="left">lm6</td>
<td align="right">0.0583404</td>
<td align="right">0.0577190</td>
<td align="right">1.1465514</td>
<td align="right">93.88232</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">-7076.422</td>
<td align="right">14162.843</td>
<td align="right">14194.957</td>
<td align="right">5976.082</td>
<td align="right">4546</td>
</tr>
<tr class="odd">
<td align="left">lm7</td>
<td align="right">0.6471711</td>
<td align="right">0.6468606</td>
<td align="right">0.7019019</td>
<td align="right">2084.14954</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">-4843.144</td>
<td align="right">9698.287</td>
<td align="right">9736.825</td>
<td align="right">2239.168</td>
<td align="right">4545</td>
</tr>
<tr class="even">
<td align="left">lm8</td>
<td align="right">0.6171771</td>
<td align="right">0.6169245</td>
<td align="right">0.7310474</td>
<td align="right">2442.98100</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">-5028.759</td>
<td align="right">10067.518</td>
<td align="right">10099.633</td>
<td align="right">2429.520</td>
<td align="right">4546</td>
</tr>
<tr class="odd">
<td align="left">lm9</td>
<td align="right">0.6124203</td>
<td align="right">0.6120010</td>
<td align="right">0.7342433</td>
<td align="right">1460.65764</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">-5134.188</td>
<td align="right">10282.376</td>
<td align="right">10327.455</td>
<td align="right">2491.781</td>
<td align="right">4622</td>
</tr>
<tr class="even">
<td align="left">lm10</td>
<td align="right">0.0655240</td>
<td align="right">0.0644957</td>
<td align="right">1.1424211</td>
<td align="right">63.72363</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">-7059.000</td>
<td align="right">14132.000</td>
<td align="right">14176.960</td>
<td align="right">5930.492</td>
<td align="right">4544</td>
</tr>
</tbody>
</table>
</div>
<div id="cross-validation" class="section level2">
<h2>Cross Validation</h2>
<p><img src="regression_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
</div>
<div id="diagnostic" class="section level2">
<h2>Diagnostic</h2>
<p><img src="regression_files/figure-html/unnamed-chunk-5-1.png" width="90%" /></p>
</div>
<div id="summary" class="section level2">
<h2>summary</h2>
<pre><code>## 
## Call:
## lm(formula = ladder ~ gdp + generosity + age, data = df)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.58626 -0.46309  0.01696  0.49522  2.13073 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -1.395320   0.083238  -16.76   &lt;2e-16 ***
## gdp          0.775024   0.008899   87.09   &lt;2e-16 ***
## generosity   1.349385   0.064549   20.91   &lt;2e-16 ***
## age30-49    -0.357701   0.025406  -14.08   &lt;2e-16 ***
## age50+      -0.571217   0.025647  -22.27   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.7019 on 4545 degrees of freedom
##   (132 observations deleted due to missingness)
## Multiple R-squared:  0.6472, Adjusted R-squared:  0.6469 
## F-statistic:  2084 on 4 and 4545 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="how-we-choose-our-interested-models" class="section level2">
<h2>How we choose our interested models</h2>
<p>To explore what are the key variables that influence life ladder, we built four different linear regression models. Model 1 describes assocaition between gdp and life ladder. Model 2 describes association between generosity and life ladder. Model 3 describes an association in which both gdp and generosity together contribute to life ladder. Model 4 indifactes that the interaction of gdp and generosity contributes to life ladder.</p>
</div>
<div id="how-we-chose-model-4-as-the-best-model" class="section level2">
<h2>How we chose model 4 as the best model</h2>
<p>First let’s take a look at the significance of slope coeficcients. In all the models,gdp, generosity and their interaction term are highly significant. Thus we conclude that they are all importang potential variables for outcome life ladder.</p>
<p>The goodness of fit for those models is also an essential criteria when choosing the best model. In linear regression model, model 3 and 4 have the highest goodness of fit. In smooth model, model 3 has the highest goodness of fit.</p>
<p>From above we decided to choose from model 3 and 4. Therefore we used ANOVA to compare those two models. The ANOVA result has a p value lower than 0.05, and according to hypothesis, we decided model 4 is the better model.</p>
</div>
<div id="a-closer-look-at-the-residuals-of-our-models" class="section level2">
<h2>A closer look at the residuals of our models</h2>
<p>(put plots here)</p>
<p>Diagnostic for those models indicate that fro all the models, their residuls are approximately normally distributed and have constance variance.</p>
</div>
<div id="can-we-predict-the-life-ladder-from-those-variables" class="section level2">
<h2>Can we predict the life ladder from those variables?</h2>
<p>One the the main purpose of this study is to d=find a model that fan help us predict life ladder from key variables. Since we built four models, we shoudl also find out which model is best in predicting the outcome.</p>
<p>Corss validations for those models indicate that model1 and 3 work much better than model 2. Therefore there might be a stronger linear association between gdp and life ladder, and linear assocaition for life ladder versus gdp and generosity.</p>
<hr />
</div>
<div id="background-why-we-choose-these-variables" class="section level2">
<h2>Background (why we choose these variables)</h2>
<p>Most of us hold the traditional view that the more money you have, the happier you will be.</p>
<p>Also, humans are an extremely prosocial species. Compared to most primates, humans provide more assistance to family, friends, and strangers, even when costly. Some evidence indicate that there is well-being benefits from donating money.</p>
<p>Both related to money, what’s the association between these two variable and happiness?</p>
</div>
<div id="introduction-about-variables" class="section level2">
<h2>Introduction about variables</h2>
<p><code>happiness</code> represent the happiness score or subjective well-being which was measured by the Gallup World Poll(GWP) covering years from 2005 to 2018,</p>
<p><code>gdp</code> represent the log transformation of statistics of GDP per capita in purchasing power parity(PPP) at constant 2011 international dollar prices are from the November 14,2018 update of the World Development Indicators (WDI).</p>
<p><code>generosity</code> is the residual of regressing national average of response to the GWPquestion “Have you donated money to a charity in the past month?” on GDP per capita.</p>
</div>
<div id="regression" class="section level2">
<h2>Regression</h2>
<p>In the process of regression, we choose 4 linear regression model and 3 smooth model to study the association between happiness, gdp and generosity. Their regression equation are shown below.</p>
<p>lm1:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp}\]</span></p>
<p>lm2:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{generosity}\]</span></p>
<p>lm3:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp} + \beta_2X_{generosity}\]</span></p>
<p>lm4:<span class="math display">\[Y_{happiness} = \beta_0 + \beta_1X_{gdp} + \beta_2X_{generosity} + \beta_3X_{gdp} * X_{generosity}\]</span></p>
</div>
<div id="results" class="section level2">
<h2>Results</h2>
<p>Therefore, I would like to choose the lm7, i.e. <span class="math display">\[Y_{happiness} = -1.39 + 0.77X_{gdp} + 1.36 X_{generosity} + (-0.36)I(age=30-49) + (-0.57)I(age = 50 +)\]</span></p>
<div id="how-we-choose-thattable-with-criterion" class="section level3">
<h3>How we choose that(table with criterion)</h3>
</div>
<div id="does-it-work-well" class="section level3">
<h3>Does it work well?</h3>
<p>According to the plot above, RMSE of lm7 is the lowest, which show that lm7 work best among all our linear model to fit test data!</p>
</div>
<div id="does-it-fulfill-our-assuamption" class="section level3">
<h3>Does it fulfill our assuamption?</h3>
<p>We made some assumptions regarding residuals like normality distribution and constant variance of residuals. According to the diagnostic above, residuals vs fitted and scale-location indicate the constant variance of residuals is satisfied. QQ plot demonstrate residuals follow normal distribution. And the residuals vs leveragge prove there are no obvious influencial observation in out dataset.</p>
</div>
</div>
<div id="furthermeaning" class="section level2">
<h2>Further(meaning)</h2>
<p>The procedure of our regression indicate that age, gdp and generosity are associated with happiness. All of them can be treated as reasonable predictor.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
